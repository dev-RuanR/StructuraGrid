<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <title>Structura - Financeiro</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="../assests/css/financeiro.css">

</head>

<body>
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div>
      <div class="sidebar-header">
        <button class="toggle-btn" id="toggleSidebar" title="Minimizar">
          <i class="bi bi-chevron-left"></i>
        </button>
        <span class="sidebar-title">S</span>
        <button class="return-btn" id="returnSidebar" title="Expandir">
          <i class="bi bi-chevron-right"></i>
        </button>
        <span class="sidebar-label" style="margin-left:0.1px;">tructuraGrid</span>
      </div>
      <div class="divider"></div>
      <nav class="nav">
        <a class="nav-link" href="Home.html" title="Principal"><i class="bi bi-house-door"></i>
          <span>Principal</span></a>
        <a class="nav-link" href="Estoque.html" title="Conteúdos"><i class="bi bi-journal-text"></i>
          <span>Conteúdos</span></a>
        <a class="nav-link" href="Beneficios.html" title="Benefícios"><i class="bi bi-gift"></i>
          <span>Benefícios</span></a>
        <a class="nav-link active" href="financeiro.html" title="Financeiro"><i class="bi bi-cash-stack"></i>
          <span>Financeiro</span></a>
        <a class="nav-link" href="Relatorios.html" title="Relatórios"><i class="bi bi-bar-chart"></i>
          <span>Relatórios</span></a>
        <a class="nav-link" href="App.html" title="Apps"><i class="bi bi-grid-3x3-gap-fill"></i>
          <span>Apps</span></a>
        <a class="nav-link" href="#" title="Configurações"><i class="bi bi-gear"></i>
          <span>Configurações</span></a>
      </nav>
    </div>
    <div class="sidebar-footer">
      <img src="https://randomuser.me/api/portraits/men/1.jpg" alt="User">
      <span>Olá, Miguel <i class="bi bi-caret-down-fill"></i></span>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content" id="mainContent">
    <div class="top-menu-wrapper" id="topMenuWrapper">
      <form class="top-search-bar mb-2" autocomplete="off">
        <i class="bi bi-search"></i>
        <input type="text" placeholder="Pesquisar..." aria-label="Pesquisar">
      </form>
      <div class="top-menu-bar">
        <div class="top-menu-card" id="formasPagamentoBtn">
          <img class="top-menu-icon" src="https://img.icons8.com/color/48/000000/bank-card-back-side.png"
            alt="Formas de Pagamento" />
          <div class="top-menu-label">Formas de<br>Pagamento</div>
          <div class="top-menu-desc">Organização de Contas</div>
        </div>
        <div class="top-menu-card-middle">
          <img class="top-menu-icon" src="https://img.icons8.com/color/48/000000/price-tag.png"
            alt="Categoria de Contas" />
          <div class="top-menu-label">Categoria<br>de Contas</div>
          <div class="top-menu-desc">Organização de Contas</div>
        </div>
        <div class="top-menu-card-middle" id="abrirFornecedores" style="cursor:pointer;">
          <img class="top-menu-icon" src="https://img.icons8.com/color/48/000000/factory.png" alt="Fornecedores" />
          <div class="top-menu-label">Fornecedores</div>
          <div class="top-menu-desc">Organização de Contas</div>
        </div>
        <div class="top-menu-card-middle" id="abrirPagar" style="cursor:pointer;">
          <img class="top-menu-icon" src="https://img.icons8.com/color/48/000000/money-transfer.png"
            alt="Contas a Pagar" style="transform: scale(-1);" />
          <div class="top-menu-label">Contas a Pagar</div>
          <div class="top-menu-desc">Contas a Pagar Nesse mês</div>
        </div>
        <div class="top-menu-card-middle" id="abrirReceber" style="cursor:pointer;">
          <img class="top-menu-icon" src="https://img.icons8.com/color/48/000000/money-transfer.png"
            alt="Contas a Receber" style="transform: scaleX(-1);" />
          <div class="top-menu-label">Contas a Receber</div>
          <div class="top-menu-desc">Contas a Pagar / Receber</div>
        </div>
        <div class="top-menu-card ">
          <img class="top-menu-icon" src="https://img.icons8.com/color/48/000000/money-bag.png"
            alt="Conta Corrente (Fiado)" />
          <div class="top-menu-label">Conta Corrente<br>(Fiado)</div>
          <div class="top-menu-desc">Fiado</div>
        </div>
        <div class="top-menu-card-end">
          <img class="top-menu-icon" src="https://img.icons8.com/ios-filled/48/cccccc/cloud.png" alt="Pix Online" />
          <div class="top-menu-label">Pix Online</div>
          <div class="top-menu-desc">Integrações</div>
        </div>
      </div>
    </div>
    <!-- Modal Consumer Style -->
    <div id="formasPagamentoModal">
      <div class="container">
        <div class="shadow modal-content">
          <div class="modal-header">
            <h5><i class="bi bi-credit-card-2-front me-2"></i>Formas de Pagamento</h5>
            <button class="btn-close"
              onclick="document.getElementById('formasPagamentoModal').classList.remove('active')">
              <i class="bi bi-x-lg"></i>
            </button>
          </div>
          <div class="modal-body">
            <div class="tab-list">
              <button type="button" class="active" data-tab="tab-formas">Formas de Pagamento</button>
              <button type="button" data-tab="tab-bandeiras">Bandeiras de Cartão</button>
              <button type="button" data-tab="tab-vinculo">Vincular Bandeiras</button>
            </div>
            <!-- Tab 1: Formas de Pagamento -->
            <div class="tab-pane active" id="tab-formas">
              <div class="consumer-actions">
                <button class="btn btn-primary" id="btnAddForma"><i class="bi bi-plus-lg"></i> Nova Forma</button>
                <button class="btn btn-outline-primary" id="btnEditForma"><i class="bi bi-pencil"></i> Editar</button>
                <button class="btn btn-danger" id="btnDeleteForma"><i class="bi bi-trash"></i> Excluir</button>
              </div>
              <div style="overflow-x:auto;">
                <table class="consumer-table" id="formasTable">
                  <thead>
                    <tr>
                      <th style="width:40px"></th>
                      <th>Forma de Pagamento</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Conteúdo dinâmico -->
                  </tbody>
                </table>
              </div>
            </div>
            <!-- Tab 2: Bandeiras de Cartão -->
            <div class="tab-pane" id="tab-bandeiras">
              <div class="consumer-actions">
                <button class="btn btn-primary"><i class="bi bi-plus-lg"></i> Nova Bandeira</button>
                <button class="btn btn-outline-primary"><i class="bi bi-pencil"></i> Editar</button>
                <button class="btn btn-danger"><i class="bi bi-trash"></i> Excluir</button>
              </div>
              <div style="overflow-x:auto;">
                <table class="consumer-table">
                  <thead>
                    <tr>
                      <th style="width:40px"></th>
                      <th>Bandeira</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="selected">
                      <td><input type="checkbox" checked></td>
                      <td class="text-blue">Visa</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Mastercard</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>American Express</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Sorocred</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Diners Club</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Elo</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Hipercard</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Aura</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Cabal</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Voucher</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>iFood</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>PagSeguro</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Pix</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <!-- Tab 3: Vincular Bandeiras -->
            <div class="tab-pane" id="tab-vinculo">
              <div class="consumer-actions">
                <button class="btn btn-primary"><i class="bi bi-link-45deg"></i> Vincular</button>
              </div>
              <div style="overflow-x:auto;">
                <table class="consumer-table">
                  <thead>
                    <tr>
                      <th style="width:40px"></th>
                      <th>Bandeiras para Vincular</th>
                      <th>Dias p/ Receber</th>
                      <th>%</th>
                      <th>Taxa</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="selected">
                      <td><input type="checkbox" checked></td>
                      <td class="text-blue">Visa</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                    <tr class="selected">
                      <td><input type="checkbox" checked></td>
                      <td class="text-blue">Mastercard</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                    <tr class="selected">
                      <td><input type="checkbox" checked></td>
                      <td class="text-blue">American Express</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Sorocred</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Diners Club</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Elo</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Hipercard</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Aura</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Cabal</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Voucher</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>iFood</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>PagSeguro</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox"></td>
                      <td>Pix</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0,00</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal custom para adicionar forma de pagamento -->
    <div id="modalAddForma">
      <div class="modal-content">
        <div class="modal-header">
          Nova Forma de Pagamento
          <button class="btn-close" id="closeAddForma" title="Fechar">&times;</button>
        </div>
        <form id="formAddForma" autocomplete="off">
          <input type="text" id="inputAddForma" placeholder="Digite o nome da nova forma" maxlength="40" required
            autofocus>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="cancelAddForma">Cancelar</button>
            <button type="submit" class="btn btn-primary">Adicionar</button>
          </div>
        </form>
      </div>
    </div>
    <!-- Modal Fornecedores com sub-abas -->
    <div id="modalFornecedores">
      <div class="modal-content">
        <div class="modal-header">
          Fornecedores
          <button class="btn-close" id="fecharFornecedores" title="Fechar">&times;</button>
        </div>
        <div class="modal-body">
          <div class="tab-list" id="tabsFornecedores">
            <button type="button" class="active" data-tab="tab-lista-fornecedores">Lista de Fornecedores</button>
            <button type="button" data-tab="tab-adicionar-fornecedor">Adicionar Fornecedor</button>
          </div>
          <div class="tab-pane active" id="tab-lista-fornecedores">
            <table class="consumer-table mb-2">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>Contato</th>
                  <th>CNPJ/CPF</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody id="listaFornecedores"></tbody>
            </table>
          </div>
          <div class="tab-pane" id="tab-adicionar-fornecedor">
            <form id="formFornecedor" autocomplete="off">
              <input type="text" id="nomeFornecedor" placeholder="Nome do Fornecedor" required maxlength="40"
                class="form-control mb-2">
              <input type="text" id="contatoFornecedor" placeholder="Contato" maxlength="40" class="form-control mb-2">
              <input type="text" id="docFornecedor" placeholder="CNPJ ou CPF" maxlength="18" class="form-control mb-2">
              <div class="modal-footer p-0">
                <button type="submit" class="btn btn-primary btn-sm">Adicionar</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Contas a Receber com sub-abas -->
    <div id="modalReceber">
      <div class="modal-content">
        <div class="modal-header">
          Contas a Receber
          <button class="btn-close" id="fecharReceber" title="Fechar">&times;</button>
        </div>
        <div class="modal-body">
          <div class="tab-list" id="tabsReceber">
            <button type="button" class="active" data-tab="tab-lista-receber">Lista de Recebimentos</button>
            <button type="button" data-tab="tab-adicionar-receber">Adicionar Recebimento</button>
          </div>
          <div class="tab-pane active" id="tab-lista-receber">
            <table class="consumer-table mb-2">
              <thead>
                <tr>
                  <th>Descrição</th>
                  <th>Valor</th>
                  <th>Data</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody id="listaReceber"></tbody>
            </table>
          </div>
          <div class="tab-pane" id="tab-adicionar-receber">
            <form id="formReceber" autocomplete="off">
              <input type="text" id="descReceber" placeholder="Descrição" required maxlength="40"
                class="form-control mb-2">
              <input type="number" id="valorReceber" placeholder="Valor" required min="0" step="0.01"
                class="form-control mb-2">
              <input type="date" id="dataReceber" required class="form-control mb-2">
              <div class="modal-footer p-0">
                <button type="submit" class="btn btn-primary btn-sm">Adicionar</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal Contas a Pagar com sub-abas -->
  <div id="modalPagar">
    <div class="modal-content">
      <div class="modal-header">
        Contas a Pagar
        <button class="btn-close" id="fecharPagar" title="Fechar">&times;</button>
      </div>
      <div class="modal-body">
        <div class="tab-list" id="tabsPagar">
          <button type="button" class="active" data-tab="tab-lista-pagar">Lista de Pagamento</button>
          <button type="button" data-tab="tab-adicionar-pagar">Adicionar Pagamento</button>
        </div>
        <div class="tab-pane active" id="tab-lista-pagar">
          <table class="consumer-table mb-2">
            <thead>
              <tr>
                <th>Descrição</th>
                <th>Valor</th>
                <th>Data</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="listaPagar"></tbody>
          </table>
        </div>
        <div class="tab-pane" id="tab-adicionar-pagar">
          <form id="formPagar" autocomplete="off">
            <input type="text" id="descPagar" placeholder="Descrição" required maxlength="40" class="form-control mb-2">
            <input type="number" id="valorPagar" placeholder="Valor" required min="0" step="0.01"
              class="form-control mb-2">
            <input type="date" id="dataPagar" required class="form-control mb-2">
            <div class="modal-footer p-0">
              <button type="submit" class="btn btn-primary btn-sm">Adicionar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  </div>
  <script>
    // Sidebar toggle igual Home
    const sidebar = document.getElementById('sidebar');
    const toggleBtn = document.getElementById('toggleSidebar');
    const returnBtn = document.getElementById('returnSidebar');
    const mainContent = document.getElementById('mainContent');
    if (toggleBtn && returnBtn && sidebar && mainContent) {
      toggleBtn.addEventListener('click', () => {
        sidebar.classList.add('minimized');
        mainContent.style.marginLeft = '72px';
      });
      returnBtn.addEventListener('click', () => {
        sidebar.classList.remove('minimized');
        mainContent.style.marginLeft = '250px';
      });
    }

    // Tabs modal
    document.querySelectorAll('.tab-list button').forEach(btn => {
      btn.addEventListener('click', function () {
        document.querySelectorAll('.tab-list button').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.getAttribute('data-tab')).classList.add('active');
      });
    });

    // Modal abrir/fechar
    document.getElementById('formasPagamentoBtn').onclick = function () {
      document.getElementById('formasPagamentoModal').classList.add('active');
    };
    document.getElementById('closeAddForma').onclick = function () {
      document.getElementById('modalAddForma').classList.remove('active');
    };
    document.getElementById('cancelAddForma').onclick = function () {
      document.getElementById('modalAddForma').classList.remove('active');
    };
    // Exemplo: abrir modal de adicionar forma
    document.getElementById('btnAddForma').onclick = function () {
      document.getElementById('modalAddForma').classList.add('active');
    };

    // Animação de destaque ao clicar em uma linha da tabela
    document.querySelectorAll('.consumer-table').forEach(table => {
      table.addEventListener('click', function (e) {
        let tr = e.target.closest('tr');
        if (tr) {
          tr.classList.add('selected');
          setTimeout(() => {
            tr.classList.remove('selected');
          }, 700);
        }
      });
    });

    // Modal Fornecedores - funcionalidade de sub-aba
    const modalFornecedores = document.getElementById('modalFornecedores');
    const abrirFornecedores = document.getElementById('abrirFornecedores');
    const fecharFornecedores = document.getElementById('fecharFornecedores');
    const formFornecedor = document.getElementById('formFornecedor');
    const listaFornecedores = document.getElementById('listaFornecedores');
    const nomeFornecedor = document.getElementById('nomeFornecedor');
    const contatoFornecedor = document.getElementById('contatoFornecedor');
    const docFornecedor = document.getElementById('docFornecedor');
    let fornecedoresArr = [];

    if (abrirFornecedores) {
      abrirFornecedores.onclick = () => {
        modalFornecedores.classList.add('active');
        renderFornecedores();
        // Abre sempre na aba de lista
        document.querySelectorAll('#tabsFornecedores button').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('#modalFornecedores .tab-pane').forEach(p => p.classList.remove('active'));
        document.querySelector('#tabsFornecedores button[data-tab="tab-lista-fornecedores"]').classList.add('active');
        document.getElementById('tab-lista-fornecedores').classList.add('active');
      }
    }
    if (fecharFornecedores) {
      fecharFornecedores.onclick = () => { modalFornecedores.classList.remove('active'); }
    }
    if (formFornecedor) {
      formFornecedor.onsubmit = e => {
        e.preventDefault();
        fornecedoresArr.push({
          nome: nomeFornecedor.value,
          contato: contatoFornecedor.value,
          doc: docFornecedor.value
        });
        nomeFornecedor.value = '';
        contatoFornecedor.value = '';
        docFornecedor.value = '';
        renderFornecedores();
        // Volta para a aba de lista
        document.querySelectorAll('#tabsFornecedores button').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('#modalFornecedores .tab-pane').forEach(p => p.classList.remove('active'));
        document.querySelector('#tabsFornecedores button[data-tab="tab-lista-fornecedores"]').classList.add('active');
        document.getElementById('tab-lista-fornecedores').classList.add('active');
      };
    }
    function renderFornecedores() {
      listaFornecedores.innerHTML = fornecedoresArr.length === 0
        ? `<tr><td colspan="4" class="text-center text-muted">Nenhum fornecedor cadastrado.</td></tr>`
        : fornecedoresArr.map((item, i) =>
          `<tr>
        <td>${item.nome}</td>
        <td>${item.contato}</td>
        <td>${item.doc}</td>
        <td><button class="btn btn-danger btn-sm" onclick="removerFornecedor(${i})">Excluir</button></td>
      </tr>`
        ).join('');
    }
    window.removerFornecedor = i => { fornecedoresArr.splice(i, 1); renderFornecedores(); };

    // Tabs do modal de fornecedores
    document.querySelectorAll('#tabsFornecedores button').forEach(btn => {
      btn.addEventListener('click', function () {
        document.querySelectorAll('#tabsFornecedores button').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('#modalFornecedores .tab-pane').forEach(p => p.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.getAttribute('data-tab')).classList.add('active');
      });
    });
    // Contas a Receber - funcionalidade de sub-aba
    const modalReceber = document.getElementById('modalReceber');
    const abrirReceber = document.getElementById('abrirReceber');
    const fecharReceber = document.getElementById('fecharReceber');
    const formReceber = document.getElementById('formReceber');
    const listaReceber = document.getElementById('listaReceber');
    const dataReceber = document.getElementById('dataReceber');
    let receberArr = [];

    abrirReceber.onclick = () => {
      modalReceber.classList.add('active');
      renderReceber();
      // Abre sempre na aba de lista
      document.querySelectorAll('#tabsReceber button').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('#modalReceber .tab-pane').forEach(p => p.classList.remove('active'));
      document.querySelector('#tabsReceber button[data-tab="tab-lista-receber"]').classList.add('active');
      document.getElementById('tab-lista-receber').classList.add('active');
    }
    fecharReceber.onclick = () => { modalReceber.classList.remove('active'); }
    formReceber.onsubmit = e => {
      e.preventDefault();
      receberArr.push({
        desc: descReceber.value,
        valor: parseFloat(valorReceber.value).toFixed(2),
        data: dataReceber.value
      });
      descReceber.value = '';
      valorReceber.value = '';
      dataReceber.value = '';
      renderReceber();
      // Volta para a aba de lista
      document.querySelectorAll('#tabsReceber button').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('#modalReceber .tab-pane').forEach(p => p.classList.remove('active'));
      document.querySelector('#tabsReceber button[data-tab="tab-lista-receber"]').classList.add('active');
      document.getElementById('tab-lista-receber').classList.add('active');
    };
    function renderReceber() {
      listaReceber.innerHTML = receberArr.length === 0
        ? `<tr><td colspan="4" class="text-center text-muted">Nenhum recebimento cadastrado.</td></tr>`
        : receberArr.map((item, i) =>
          `<tr>
            <td>${item.desc}</td>
            <td>R$ ${item.valor}</td>
            <td>${item.data ? new Date(item.data).toLocaleDateString('pt-BR') : ''}</td>
            <td><button class="btn btn-danger btn-sm" onclick="removerReceber(${i})">Excluir</button></td>
          </tr>`
        ).join('');
    }
    window.removerReceber = i => { receberArr.splice(i, 1); renderReceber(); };

    // Tabs do modal de contas a receber
    document.querySelectorAll('#tabsReceber button').forEach(btn => {
      btn.addEventListener('click', function () {
        document.querySelectorAll('#tabsReceber button').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('#modalReceber .tab-pane').forEach(p => p.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.getAttribute('data-tab')).classList.add('active');
      });
    });


    // Contas a Pagar - funcionalidade de sub-aba
    const modalPagar = document.getElementById('modalPagar');
    const abrirPagar = document.getElementById('abrirPagar');
    const fecharPagar = document.getElementById('fecharPagar');
    const formPagar = document.getElementById('formPagar');
    const listaPagar = document.getElementById('listaPagar');
    const descPagar = document.getElementById('descPagar');
    const valorPagar = document.getElementById('valorPagar');
    const dataPagar = document.getElementById('dataPagar');
    let pagarArr = [];

    abrirPagar.onclick = () => {
      modalPagar.classList.add('active');
      renderPagar();
      // Abre sempre na aba de lista
      document.querySelectorAll('#tabsPagar button').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('#modalPagar .tab-pane').forEach(p => p.classList.remove('active'));
      document.querySelector('#tabsPagar button[data-tab="tab-lista-pagar"]').classList.add('active');
      document.getElementById('tab-lista-pagar').classList.add('active');
    }
    fecharPagar.onclick = () => { modalPagar.classList.remove('active'); }
    formPagar.onsubmit = e => {
      e.preventDefault();
      pagarArr.push({
        desc: descPagar.value,
        valor: parseFloat(valorPagar.value).toFixed(2),
        data: dataPagar.value
      });
      descPagar.value = '';
      valorPagar.value = '';
      dataPagar.value = '';
      renderPagar();
      // Volta para a aba de lista
      document.querySelectorAll('#tabsPagar button').forEach(b => b.classList.remove('active'));
      document.querySelectorAll('#modalPagar .tab-pane').forEach(p => p.classList.remove('active'));
      document.querySelector('#tabsPagar button[data-tab="tab-lista-pagar"]').classList.add('active');
      document.getElementById('tab-lista-pagar').classList.add('active');
    };
    function renderPagar() {
      listaPagar.innerHTML = pagarArr.length === 0
        ? `<tr><td colspan="4" class="text-center text-muted">Nenhum pagamento cadastrado.</td></tr>`
        : pagarArr.map((item, i) =>
          `<tr>
        <td>${item.desc}</td>
        <td>R$ ${item.valor}</td>
        <td>${item.data ? new Date(item.data).toLocaleDateString('pt-BR') : ''}</td>
        <td><button class="btn btn-danger btn-sm" onclick="removerPagar(${i})">Excluir</button></td>
      </tr>`
        ).join('');
    }
    window.removerPagar = i => { pagarArr.splice(i, 1); renderPagar(); };

    // Tabs do modal de contas a pagar
    document.querySelectorAll('#tabsPagar button').forEach(btn => {
      btn.addEventListener('click', function () {
        document.querySelectorAll('#tabsPagar button').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('#modalPagar .tab-pane').forEach(p => p.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.getAttribute('data-tab')).classList.add('active');
      });
    });

  </script>
</body>

</html>